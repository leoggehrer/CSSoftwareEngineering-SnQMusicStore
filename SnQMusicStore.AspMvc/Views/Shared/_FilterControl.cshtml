@*@CodeCopy*@
@{
    @using SnQMusicStore.AspMvc.Models.Modules.View
    @using SnQMusicStore.AspMvc.Modules.Session
    @using SnQMusicStore.AspMvc.Modules.View
    @model IndexViewModel

    if (Model != null)
    {
        var viewBagInfo = Model.ViewBagInfo ?? new ViewBagWrapper(ViewBag);
        var sessionInfo = new SessionWrapper(Context.Session);
        var filterModel = new FilterModel(sessionInfo, Model);

        <form asp-action="Filter" method="post">
            <div asp-validation-summary="ModelOnly" class="text-danger"></div>
            @await Html.PartialAsync("_FilterModel", filterModel)
            @await Html.PartialAsync("_Submit", new SubmitCmd() { SubmitText = viewBagInfo.TranslateFor("Apply") })
        </form>
    }
}
